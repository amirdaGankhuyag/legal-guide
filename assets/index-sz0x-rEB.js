import{j as e,r as c,u as te,a as R,F as Y,b as Z,y as O,c as se,L as z,M as ae,T as le,d as G,P as W,e as q,f as oe,N as T,O as ne,Q as re,g as ce,R as ie,h as S,i as de,B as me}from"./vendor-react-B9uCrjK8.js";import{a as he,b as xe,d as E,e as L,f as V,u as H,h as P,s as M,j as ue}from"./vendor-fauyXDQE.js";import{a as X}from"./vendor-leaflet-DPNt78ht.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))i(m);new MutationObserver(m=>{for(const o of m)if(o.type==="childList")for(const x of o.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function s(m){const o={};return m.integrity&&(o.integrity=m.integrity),m.referrerPolicy&&(o.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?o.credentials="include":m.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(m){if(m.ep)return;m.ep=!0;const o=s(m);fetch(m.href,o)}})();const C=he.create({baseURL:"http://localhost:5000/api/v1/"});C.defaults.withCredentials=!0;const pe={apiKey:"AIzaSyD7JCT0A0WbN1-emI-XHy__10jdFjS94ug",authDomain:"legal-guide-2f523.firebaseapp.com",projectId:"legal-guide-2f523",storageBucket:"legal-guide-2f523.firebasestorage.app",messagingSenderId:"264268567728",appId:"1:264268567728:web:e8a80505bed6e04fc11775"},F=xe(pe),$=l=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"absolute top-0 left-0",width:"21",height:"44",viewBox:"0 0 21 44",children:e.jsx("path",{fill:l?"white":"none",stroke:l?"white":"url(#btn-left)",strokeWidth:"2",d:"M21,43.00005 L8.11111,43.00005 C4.18375,43.00005 1,39.58105 1,35.36365 L1,8.63637 C1,4.41892 4.18375,1 8.11111,1 L21,1"})}),e.jsx("svg",{className:"absolute top-0 left-[1.3125rem] w-[calc(100%-2.625rem)]",height:"44",viewBox:"0 0 100 44",preserveAspectRatio:"none",fill:l?"white":"none",children:l?e.jsx("polygon",{fill:"white",fillRule:"nonzero",points:"100 0 100 44 0 44 0 0"}):e.jsxs(e.Fragment,{children:[e.jsx("polygon",{fill:"url(#btn-top)",fillRule:"nonzero",points:"100 42 100 44 0 44 0 42"}),e.jsx("polygon",{fill:"url(#btn-bottom)",fillRule:"nonzero",points:"100 0 100 2 0 2 0 0"})]})}),e.jsx("svg",{className:"absolute top-0 right-0",width:"21",height:"44",viewBox:"0 0 21 44",children:e.jsx("path",{fill:l?"white":"none",stroke:l?"white":"url(#btn-right)",strokeWidth:"2",d:"M0,43.00005 L5.028,43.00005 L12.24,43.00005 C16.526,43.00005 20,39.58105 20,35.36365 L20,16.85855 C20,14.59295 18.978,12.44425 17.209,10.99335 L7.187,2.77111 C5.792,1.62675 4.034,1 2.217,1 L0,1"})})]}),A=({className:l,href:t,onClick:s,children:i,px:m,white:o,black:x})=>{const f=`button relative inline-flex items-center justify-center h-11 transition-colors hover:text-1 ${m||"px-7"} ${x?"text-black":o?"text-neutral-800":"text-neutral-100"} ${l||""}`,u="relative z-10";return t?e.jsxs("a",{href:t,className:f,children:[e.jsx("span",{className:u,children:i}),$(o)]}):e.jsxs("button",{className:f,onClick:s,children:[e.jsx("span",{className:u,children:i}),$(o)]})},ge=()=>{const l=E(F),t={name:"",address:"",description:"",services:[],newService:"",contact:{phone:"",email:""},location:{latitude:"",longitude:""},photo:null,photoUrl:""},[s,i]=c.useState(t),[m,o]=c.useState([]),[x,f]=c.useState(null),[u,n]=c.useState(null);c.useEffect(()=>{h()},[]),c.useEffect(()=>{s.photo instanceof File?f(URL.createObjectURL(s.photo)):s.photoUrl?f(s.photoUrl):f(null)},[s.photo,s.photoUrl]);const h=async()=>{try{const a=await C.get("/firms/all");o(a.data.data)}catch(a){console.error("Фирмүүдийг татаж чадсангүй",a)}},y=a=>{const{name:p,value:v}=a.target;if(p.startsWith("contact.")||p.startsWith("location.")){const[U,B]=p.split(".");i(K=>({...K,[U]:{...K[U],[B]:v}}))}else i(U=>({...U,[p]:v}))},w=a=>i(p=>({...p,photo:a.target.files[0]})),k=()=>{const a=s.newService.trim();a&&i(p=>({...p,services:[...p.services,a],newService:""}))},j=a=>{const p=s.services.filter((v,U)=>U!==a);i(v=>({...v,services:p}))},N=()=>{i(t),f(null),n(null)},d=async()=>{if(s.photo instanceof File){const a=L(l,`FirmPhotos/${s.photo.name}`);return await H(a,s.photo),{photoUrl:await P(a),photoName:s.photo.name}}return{photoUrl:s.photoUrl||"no-url",photoName:"no-photo"}},g=async a=>{a.preventDefault();try{const{photoUrl:p,photoName:v}=await d(),U={name:s.name,address:s.address,description:s.description,services:s.services,contact:s.contact,location:{latitude:Number(s.location.latitude),longitude:Number(s.location.longitude)},photo:v,photoUrl:p};u?(await C.put(`/firms/${u}`,U),alert("Фирм шинэчлэгдлээ!")):(await C.post("/firms",U),alert("Фирм нэмэгдлээ!")),N(),h()}catch(p){console.error("Хадгалахад алдаа гарлаа:",p)}},r=a=>{i({name:a.name,address:a.address,description:a.description,services:a.services,newService:"",contact:a.contact,location:{latitude:a.location.latitude.toString(),longitude:a.location.longitude.toString()},photo:null,photoUrl:a.photoUrl}),n(a._id)},b=async a=>{if(window.confirm("Фирмийг устгах уу?"))try{const p=m.find(v=>v._id===a);if(p&&p.photo&&p.photo!=="no-photo"){const v=L(l,`FirmPhotos/${p.photo}`);await V(v),console.log("Firebase дээрх зураг устгагдлаа")}await C.delete(`/firms/${a}`),alert("Фирм болон зургыг амжилттай устгалаа"),h(),u===a&&N()}catch(p){console.error("Устгахад алдаа гарлаа:",p)}};return e.jsx("div",{className:"font-code min-h-screen bg-gray-50 px-4 pt-5 pb-10",children:e.jsxs("div",{className:"mx-auto max-w-3xl rounded-xl bg-white p-8 shadow-xl",children:[e.jsx("h1",{className:"mb-6 text-center text-3xl font-bold text-gray-800",children:u?"Хуулийн фирм засах":"Хуулийн фирм нэмэх"}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[["name","address","description"].map(a=>e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:a==="name"?"Фирмийн нэр":a==="address"?"Хаяг":"Тайлбар"}),a==="description"?e.jsx("textarea",{name:a,value:s[a],onChange:y,className:"w-full rounded-md border-gray-300 p-2 shadow-md"}):e.jsx("input",{name:a,value:s[a],onChange:y,required:!0,className:"w-full rounded-md border-gray-300 p-2 shadow-md"})]},a)),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Үйлчилгээ"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"newService",value:s.newService,onChange:y,placeholder:"Үйлчилгээ нэмэх",className:"flex-grow rounded-md border-gray-300 p-2 shadow-md"}),e.jsx("button",{type:"button",onClick:k,className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Нэмэх"})]}),e.jsx("ul",{className:"mt-2 space-y-1",children:s.services.map((a,p)=>e.jsxs("li",{className:"flex justify-between rounded bg-gray-100 px-3 py-1",children:[a,e.jsx("button",{type:"button",onClick:()=>j(p),className:"text-red-500",children:"Устгах"})]},p))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[["phone","email"].map(a=>e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:a==="phone"?"Утас":"Имэйл"}),e.jsx("input",{name:`contact.${a}`,value:s.contact[a],onChange:y,className:"w-full rounded-md border-gray-300 p-2 shadow-md"})]},a)),["latitude","longitude"].map(a=>e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:a==="latitude"?"Өргөрөг":"Уртраг"}),e.jsx("input",{name:`location.${a}`,value:s.location[a],onChange:y,className:"w-full rounded-md border-gray-300 p-2 shadow-md"})]},a))]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Зураг"}),e.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:bg-blue-50 file:px-4 file:py-2 file:text-blue-700"}),x&&e.jsx("img",{src:x,alt:"Preview",className:"mt-2 h-32 w-auto rounded-md border object-cover shadow-md"})]}),e.jsx(A,{type:"submit",black:!0,className:"w-full",children:u?"Шинэчлэх":"Хадгалах"}),u&&e.jsx(A,{type:"button",black:!0,onClick:N,className:"w-full",children:"Болих"})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Бүртгэлтэй фирмүүд"}),m.length===0?e.jsx("p",{children:"Фирм бүртгэгдээгүй байна."}):e.jsx("ul",{className:"space-y-2",children:m.map(a=>e.jsxs("li",{className:"flex justify-between rounded-md bg-gray-100 p-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.address})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>r(a),className:"rounded bg-yellow-400 px-3 py-1 text-white hover:bg-yellow-500",children:"Засах"}),e.jsx("button",{onClick:()=>b(a._id),className:"rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Устгах"})]})]},a._id))})]})]})})},fe=()=>{const l=E(F),[t,s]=c.useState({firstName:"",lastName:"",position:"",workAddress:"",contact:{phone:"",email:"",facebookAcc:"",instagramAcc:""},services:[],newService:"",photo:null,photoUrl:"no-url"}),[i,m]=c.useState(null),[o,x]=c.useState(null),[f,u]=c.useState([]);c.useEffect(()=>{n()},[]),c.useEffect(()=>{t.photo instanceof File?x(URL.createObjectURL(t.photo)):t.photoUrl&&t.photoUrl!=="no-url"?x(t.photoUrl):x(null)},[t.photo,t.photoUrl]);const n=async()=>{try{const r=await C.get("/lawyers");u(r.data.data)}catch(r){console.error("Хуульчдын мэдээлэл татаж чадсангүй",r)}},h=r=>{const{name:b,value:a}=r.target;if(b.startsWith("contact.")){const p=b.split(".")[1];s(v=>({...v,contact:{...v.contact,[p]:a}}))}else s(p=>({...p,[b]:a}))},y=r=>{s(b=>({...b,photo:r.target.files[0]}))},w=()=>{t.newService.trim()&&s(r=>({...r,services:[...r.services,t.newService.trim()],newService:""}))},k=r=>{const b=t.services.filter((a,p)=>p!==r);s(a=>({...a,services:b}))},j=()=>{s({firstName:"",lastName:"",position:"",workAddress:"",contact:{phone:"",email:"",facebookAcc:"",instagramAcc:""},services:[],newService:"",photo:null}),m(null),x(null)},N=async r=>{r.preventDefault();try{let b="no-photo",a="no-url";if(t.photo){const v=L(l,`LawyerPhotos/${t.photo.name}`);await H(v,t.photo),a=await P(v),b=t.photo.name}const p={...t,photo:b,photoUrl:a,services:t.services};i?(await C.put(`/lawyers/${i}`,p),alert("Хуульчийн мэдээлэл шинэчлэгдлээ.")):(await C.post("/lawyers",p),alert("Хуульч амжилттай нэмэгдлээ.")),j(),n()}catch(b){console.error("Хуульч нэмэхэд алдаа гарлаа:",b)}},d=r=>{m(r._id),s({firstName:r.firstName||"",lastName:r.lastName||"",position:r.position||"",workAddress:r.workAddress||"",contact:r.contact||{phone:"",email:"",facebookAcc:"",instagramAcc:""},services:r.services||[],newService:"",photo:null,photoUrl:r.photoUrl||"no-url"})},g=async r=>{if(window.confirm("Устгахдаа итгэлтэй байна уу?"))try{await C.delete(`/lawyers/${r}`),alert("Хуульч устгагдлаа."),n(),i===r&&j()}catch(b){console.error("Устгахад алдаа гарлаа:",b)}};return e.jsx("div",{className:"font-code min-h-screen bg-gray-50 px-4 pt-5 pb-10",children:e.jsxs("div",{className:"mx-auto max-w-3xl rounded-xl bg-white p-8 shadow-xl",children:[e.jsx("h1",{className:"mb-6 text-center text-3xl font-bold text-gray-800",children:i?"Хуульчийн мэдээлэл засах":"Хуульч мэдээлэл нэмэх"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Овог"}),e.jsx("input",{name:"lastName",value:t.lastName,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Нэр"}),e.jsx("input",{name:"firstName",value:t.firstName,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Албан тушаал"}),e.jsx("input",{name:"position",value:t.position,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Ажлын хаяг"}),e.jsx("input",{name:"workAddress",value:t.workAddress,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Утас"}),e.jsx("input",{name:"contact.phone",value:t.contact.phone,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Имэйл"}),e.jsx("input",{name:"contact.email",value:t.contact.email,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Facebook хаяг"}),e.jsx("input",{name:"contact.facebookAcc",value:t.contact.facebookAcc,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Instagram хаяг"}),e.jsx("input",{name:"contact.instagramAcc",value:t.contact.instagramAcc,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Үйлчилгээ нэмэх"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Үйлчилгээ нэмэх",name:"newService",value:t.newService,onChange:h,className:"flex-grow rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"}),e.jsx("button",{type:"button",onClick:w,className:"rounded-lg bg-blue-600 px-3 py-1 text-white transition hover:bg-blue-700",children:"Нэмэх"})]}),t.services.length>0&&e.jsx("ul",{className:"mt-2 space-y-1",children:t.services.map((r,b)=>e.jsxs("li",{className:"flex items-center justify-between rounded bg-gray-100 px-3 py-1",children:[r,e.jsx("button",{type:"button",onClick:()=>k(b),className:"text-red-500 hover:text-red-700",children:"Устгах"})]},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Зураг"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"})]}),o&&e.jsx("img",{src:o,alt:"Preview",className:"mt-2 h-32 w-auto rounded-md border object-cover shadow-md"}),e.jsxs("div",{className:"text-center",children:[e.jsx(A,{type:"submit",black:!0,className:"w-full",children:i?"Шинэчлэх":"Хадгалах"}),i&&e.jsx(A,{type:"button",black:!0,onClick:j,className:"mt-2 w-full",children:"Болих"})]})]}),e.jsxs("div",{className:"mt-5 pt-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-700",children:"Хуульчдын жагсаалт"}),e.jsx("ul",{className:"space-y-2",children:f.map(r=>e.jsxs("li",{className:"flex items-center justify-between rounded bg-gray-100 px-4 py-2",children:[e.jsxs("div",{children:[r.lastName," ",r.firstName," - ",r.position]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>d(r),className:"rounded bg-yellow-400 px-3 py-1 text-white hover:bg-yellow-500",children:"Засах"}),e.jsx("button",{onClick:()=>g(r._id),className:"rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Устгах"})]})]},r._id))})]})]})})},je=()=>{const l=E(F),[t,s]=c.useState({title:"",content:"",summary:"",photo:null}),[i,m]=c.useState([]),[o,x]=c.useState(null),[f,u]=c.useState(null);c.useEffect(()=>{n()},[]),c.useEffect(()=>{t.photo instanceof File?u(URL.createObjectURL(t.photo)):t.photoUrl&&t.photoUrl!=="no-url"?u(t.photoUrl):u(null)},[t.photo,t.photoUrl]);const n=async()=>{try{const d=await C.get("/infos");m(d.data.data)}catch(d){console.error("Мэдээлэл татаж чадсангүй",d)}},h=d=>{const{name:g,value:r}=d.target;s(b=>({...b,[g]:r}))},y=d=>{s(g=>({...g,photo:d.target.files[0]}))},w=()=>{s({title:"",content:"",summary:"",photo:null,photoUrl:null}),x(null),u(null)},k=async d=>{d.preventDefault();try{let g="no-photo",r="no-url";if(t.photo&&typeof t.photo!="string"){const a=L(l,`InfoPhotos/${t.photo.name}`);await H(a,t.photo),r=await P(a),g=t.photo.name}const b={title:t.title,content:t.content,summary:t.summary,photo:g,photoUrl:r};o?(await C.put(`/infos/${o}`,b),alert("Мэдээлэл амжилттай шинэчлэгдлээ!"),x(null)):(await C.post("/infos",b),alert("Мэдээлэл нэмэгдлээ!")),w(),n()}catch(g){console.error("Алдаа гарлаа",g)}},j=d=>{x(d._id),s({title:d.title,content:d.content,summary:d.summary,photo:d.photo,photoUrl:d.photoUrl})},N=async(d,g)=>{if(confirm("Устгах уу?"))try{if(await C.delete(`/infos/${d}`),g&&g!=="no-photo"){const r=L(l,`InfoPhotos/${g}`);await V(r)}n(),alert("Мэдээлэл устгагдлаа.")}catch(r){console.error("Устгахад алдаа гарлаа",r)}};return e.jsxs("div",{className:"font-code min-h-screen bg-gray-50 px-4 pt-5 pb-10",children:[e.jsxs("div",{className:"mx-auto max-w-3xl rounded-xl bg-white p-6 shadow-xl",children:[e.jsx("h1",{className:"mb-6 text-center text-3xl font-bold text-gray-800",children:o?"Мэдээлэл засах":"Мэдээлэл нэмэх"}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Гарчиг"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Товч агуулга"}),e.jsx("textarea",{name:"summary",value:t.summary,onChange:h,className:"w-full rounded-md border-gray-300 p-2 shadow-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Дэлгэрэнгүй агуулга"}),e.jsx("textarea",{name:"content",value:t.content,onChange:h,className:"h-32 w-full rounded-md border-gray-300 p-2 shadow-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Зураг"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"}),f&&e.jsx("img",{src:f,alt:"Зургийн preview",className:"mt-2 h-32 w-auto rounded-md border object-cover shadow-md"})]}),e.jsx(A,{type:"submit",className:"w-full",black:!0,children:o?"Шинэчлэх":"Хадгалах"}),o&&e.jsx(A,{type:"button",black:!0,onClick:w,className:"w-full",children:"Болих"})]})]}),e.jsx("div",{className:"mx-auto mt-10 max-w-3xl space-y-4",children:i.map(d=>e.jsx("div",{className:"rounded-md bg-white p-4 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:d.title}),e.jsx("p",{className:"text-gray-600",children:d.summary})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>j(d),className:"rounded bg-yellow-400 px-3 py-1 text-white",children:"Засах"}),e.jsx("button",{onClick:()=>N(d._id,d.photo),className:"rounded bg-red-500 px-3 py-1 text-white",children:"Устгах"})]})]})},d._id))})]})},be=()=>{const[l,t]=c.useState("firm");return e.jsxs("div",{className:"bg-gray-50 px-4 py-2",children:[e.jsx("h1",{className:"font-code ml-2 flex justify-center text-2xl font-bold",children:"Админ хуудас"}),e.jsxs("div",{className:"flex justify-center gap-4 py-4",children:[e.jsx(A,{onClick:()=>t("firm"),black:!0,children:"Фирм"}),e.jsx(A,{onClick:()=>t("lawyer"),black:!0,children:"Хуульч"}),e.jsx(A,{onClick:()=>t("info"),black:!0,children:"Мэдээлэл"})]}),l==="firm"&&e.jsx(ge,{}),l==="lawyer"&&e.jsx(fe,{}),l==="info"&&e.jsx(je,{})]})},Q=[{id:"0",title:"Нүүр",url:"/"},{id:"1",title:"Хуулийн фирмүүд",url:"/firms"},{id:"2",title:"Хуульчид",url:"/lawyers"},{id:"3",title:"Мэдээлэл",url:"/infos"},{id:"4",title:"Бүртгүүлэх",url:"/signup",onlyMobile:!0},{id:"5",title:"Нэвтрэх",url:"/login",onlyMobile:!0},{id:"6",title:"Гарах",url:"/login",onlyMobile:!0},{id:"7",title:"Админ",url:"/admin"}],we="/legal-guide/assets/legalguide-2nyORTre.svg",ye="/legal-guide/assets/background-Bwa1XwSa.jpg",_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3c/svg%3e",Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVR4nN1Uy04UURCdQHQjcas7uqpJ1FFW7iH4AxIU/QDx8Rezpasa4gQiYa2BxE8QNAE+AYyA446qlsSN6BLT5NyZgUS6mYdxw00q3encPnXvOXVOpXKpV7W2czVODp6S+Aqr77LY71Dqu/gWafYEe/oCJ/FHJPaNxT9QajNRcnDrhmbXUMOp3Y7EnrP6Gqk1WH2qe+T3+SCLpSy+F6mP8dz3URKvk9pO+wZ4J/HXrNm9KPFxUt9nNa3U8oGO+E1w2xiWw5us9obV/rB6Xlhix6y22NzrmyQmHWnByfEDqX0qBf6rSOxj+Ef8a5zaZCE4xALnoIXElroF59Pb+EKcZBNoUig8pgWCgvMLadFyuuLZ7C6Jr5Nk00X0rJLaMwjaM7ieNpmPU3/B4u8KxPU9jCKJfe63AYltY4Thk4Ib2K/q4uEQnn03UDtqY5Q3UDv6hxv8HKn/uI7n/6No1u+UUOQrsH/ToX2KrDbH6q9Y7e25BgguZAvs33Ro72M6ol6F6Uj9cbHR1BrIFti/d3q8zpo9gNHuL+dXzjUIOqhPIbhatl/vocFaK14asdjDQvCzJqYIrhBg4gsX0iV2jJO39m6RelLpuGr5AFIxBFeSTcD+cCgmBKPcqm0ICs4DLWqNAN5NXLcXUhFNQBXsj/GDT1ABWPxlEBQH6URL2YJYCC5kC4t/ad8A7/iGaSkV9NKsE3wXH2F/7LbjAAAAAElFTkSuQmCC",ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADlklEQVR4nO2aSUiVURTHf2ZlkxaWjQQNZotCswg3BVZQuKigwYhKqF0DLaJoo9C0iGob2GAT0SIpK5qgTQNhZUGQWYsGo9EsbS7NfHHhPLh8fPO77/ke+IcDj/vd6f++c8/53/MedMMWw4E1wHHgPtAMtANtwEfgOjBQ+vYkCTEDOA/8BSIO1gkslf55wHvgCJBPEmAscNFl87rtlDHqjTyxPDsN5HQViWXAN58kzgE9gHTgkkOfD8CCRJPYKq7ih0QDkCXj9nj07QQ2JIpEGlAB/PNB4hMwTsat8Em8MxFk8sU9EDf46rIhdfBnS9/pwC+fRCJCpiReJNRhbJIQmqNFnwaHzazXQvLrACQiYmqtYfEgckZb5BkwWdoHAZctmzgozzKA2hAkImLbTZOYZrPId2CJdm62iUvcFgIKh2Mg8VgLEsZwysWXd0hoVVgEDJXP2UAh0F9MfS4Xl/Ei0Sw5CpMJc4jIDLeFLwT49jKBape52oFZ0rdIcpWRZFnqM8rMDzBnmguZddJnJPBW2spMEDkQQH4EQZYISX2eSnnWB7irtVeZIKJP6CY/wqBCm+cG0EvaT1jWuGeCyEsXEo/E58OiUOZp1M7BZpt11JuLGT8dSHwGcqXPSqBfiLkzJeOr8K4wF+iwWeuPCSJtPuTH75Bvpq+WiyYCrQ5f2g8TRJptJo6KuhHAG2mbEsMaSh08dXHh5yaI1PmUHyrZhYESoVc8AkqtCSJHtQlvAb2l/ZhlsaaQ7rXXR3jfb4LIapnslSY/NjksWC3Jzi9W+SARARabIKI2/0VCpcI8h8iik/EjV4okSHiRaBfdZgSTtPuHU2Sxxn2V7KYCAzTRmGUjP7zsJIaRKdI6EtJU6ScqP+4EGFdomsjuGEi4yQ83qyEOUO7QEoJEoxYktgQY1wqMIk4oC0hCZeQCGVviESSstpw445DPjXTKXcZLfthZJQmAOqwPAxQOvOSH1eq0O3/cketR06qRO0qPALVhZS3aXT2htV+v6se+ACSUKy6ki1BlUyIdH1B+RG0XXQh1marXpERxQPkRtZtaKbbLkCclm7U2dxQ/pnTcGJIEBQ7VDz9mpNQT7zPjZWdJQmR7hGSrvQMGk6TYGIBINOsnJdKBBz5IXCUFUOxBokO7qCU9rrkQUUWLlMEcFxkygRRDfaqeDSvKbYion6hTDjNtiIwmBZFhSZDqcpWyKJV/Ab3QfhfsBi74D+UP7ho5NOtKAAAAAElFTkSuQmCC",Ce=({openNavigation:l})=>e.jsxs("svg",{className:"overflow-visible",width:"20",height:"12",viewBox:"0 0 20 12",children:[e.jsx("rect",{className:"transition-all origin-center",y:l?"5":"0",width:"20",height:"2",rx:"1",fill:"white",transform:`rotate(${l?"45":"0"})`}),e.jsx("rect",{className:"transition-all origin-center",y:l?"5":"10",width:"20",height:"2",rx:"1",fill:"white",transform:`rotate(${l?"-45":"0"})`})]}),ke=()=>e.jsx("div",{className:"pointer-events-none absolute inset-0 lg:hidden",children:e.jsx("div",{className:"absolute inset-0 opacity-[.2]",children:e.jsx("img",{className:"h-full w-full object-cover",src:ye,width:688,height:953,alt:"Background"})})}),ee=c.createContext(),Ae=({children:l})=>{const[t,s]=c.useState(!1),[i,m]=c.useState(!0),[o,x]=c.useState(!1);if(c.useEffect(()=>{const n=localStorage.getItem("token"),h=localStorage.getItem("role");n?(s(!0),x(h==="admin")):(s(!1),x(!1)),m(!1)},[]),i)return null;const f=(n,h)=>{localStorage.setItem("token",n),localStorage.setItem("role",h),s(!0),x(h==="admin")},u=()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),s(!1),x(!1)};return e.jsx(ee.Provider,{value:{isAuth:t,isAdmin:o,login:f,logout:u},children:l})},D=()=>c.useContext(ee),Se=()=>{const l=te(),t=R(),[s,i]=c.useState(!1),{isAuth:m,isAdmin:o,logout:x}=D(),f=()=>{s?(i(!1),M.enablePageScroll()):(i(!0),M.disablePageScroll())},u=()=>{s&&(M.enablePageScroll(),i(!1))},n=()=>{x(),C.get("users/logout").then(w=>{}).catch(w=>{console.log(w)}),t("/login")},y=(()=>{if(!m)return Q.filter(k=>["0","4","5"].includes(k.id));const w=Q.filter(k=>["0","1","2","3","6"].includes(k.id));return o?[...w,Q.find(k=>k.id==="7")]:w})();return e.jsx("div",{className:`fixed top-0 left-0 z-50 w-full border-b border-neutral-600 lg:bg-neutral-800/90 lg:backdrop-blur-sm ${s?"bg-neutral-800":"bg-neutral-800/90 backdrop-blur-sm"}`,children:e.jsxs("div",{className:"flex items-center px-5 max-lg:py-4 lg:px-7.5 xl:px-10",children:[e.jsx("a",{className:"block w-[12rem] xl:mr-8",href:"/",children:e.jsx("img",{src:we,width:190,height:40,alt:"LegalGudie"})}),e.jsxs("nav",{className:` ${s?"flex":"hidden"} fixed top-[6.5rem] right-0 bottom-0 left-0 bg-neutral-800 lg:static lg:mx-auto lg:flex lg:bg-transparent`,children:[e.jsx("div",{className:"relative z-2 m-auto flex flex-col items-center justify-center lg:flex-row",children:y.map(w=>e.jsx("a",{href:w.url,onClick:w.id==="6"?n:u,className:`font-code relative block text-2xl text-neutral-100 uppercase transition-colors hover:text-purple-700 ${w.onlyMobile?"lg:hidden":""} px-6 py-6 md:py-8 lg:-mr-0.25 lg:text-xs lg:font-semibold ${w.url===l.hash?"z-2 lg:text-neutral-100":"lg:text-neutral-100/50"} lg:leading-5 lg:hover:text-neutral-100 xl:px-12`,children:w.title},w.id))}),e.jsx(ke,{})]}),m?e.jsx(A,{onClick:n,className:"max-sm:hidden sm:hidden lg:flex",children:"Гарах"}):e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"/signup",className:"button mr-8 hidden text-neutral-100/50 transition-colors hover:text-neutral-100 lg:block",children:"Бүртгүүлэх"}),e.jsx(A,{className:"max-sm:hidden sm:hidden lg:flex",href:"/login",children:"Нэвтрэх"})]}),e.jsx(A,{className:"ml-auto lg:hidden",px:"px-3",onClick:f,children:e.jsx(Ce,{openNavigation:s})})]})})},Ue=()=>e.jsx("footer",{className:"font-code bg-neutral-800/90 py-5 font-semibold text-white",children:e.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between text-center md:flex-row md:text-left",children:[e.jsx("p",{className:"md:text-md mb-4 text-sm md:mb-0",children:"© 2025 Legal Guide. Бүх эрх хуулиар хамгаалагдсан."}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-center space-x-6 md:mt-0 md:justify-end",children:[e.jsx("p",{className:"md:text-md mb-4 text-center text-sm md:mb-0 md:text-left",children:"Системийг хөгжүүлсэн Г. Амирда"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://www.facebook.com/Gankhuyag.Amirda/",target:"_blank",rel:"noopener noreferrer",className:"text-white transition-colors duration-300 hover:text-blue-600",children:e.jsx(Y,{className:"text-xl"})}),e.jsx("a",{href:"https://www.instagram.com/amirda.mrd/",target:"_blank",rel:"noopener noreferrer",className:"text-white transition-colors duration-300 hover:text-pink-500",children:e.jsx(Z,{className:"text-xl"})})]})]})]})}),Le=({onLogin:l})=>{const[t,s]=c.useState(""),[i,m]=c.useState(""),[o,x]=c.useState(!1),[f,u]=c.useState(!1),{isAuth:n}=D(),h=N=>{const{name:d,value:g}=N.target;d==="email"&&s(g),d==="password"&&m(g)},y=()=>{x(!0),C.post("users/login",{email:t,password:i}).then(N=>{l(N.data.token,N.data.user.role)}).catch(N=>{var d,g;O.error((g=(d=N.response)==null?void 0:d.data)==null?void 0:g.error)}).finally(()=>{x(!1)})},w=()=>{u(!0),window.location.href="http://localhost:5000/api/v1/users/google",u(!1)},k=t&&i,j=N=>{N.key==="Enter"&&t&&!o&&y()};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-200",children:e.jsxs("div",{className:"w-90 rounded-lg bg-gray-100 p-6 shadow-xl",children:[e.jsx("h1",{className:"text-center text-xl font-bold text-gray-800",children:"Нэвтрэх"}),e.jsx("div",{className:"mt-5",children:e.jsx("input",{name:"email",type:"email",placeholder:"Имэйл",className:"h-9 w-full rounded-md border border-gray-300 p-2",onChange:h,onKeyDown:j})}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{name:"password",type:"password",placeholder:"Нууц үг",className:"h-9 w-full rounded-md border border-gray-300 p-2",onChange:h,onKeyDown:j})}),e.jsx("button",{type:"submit",className:"mt-5 w-full rounded-lg bg-blue-500 py-2 text-white transition hover:bg-blue-600 disabled:bg-gray-400",onClick:y,disabled:!k||o,children:o?"Түр хүлээнэ үү...":"Нэвтрэх"}),e.jsx("button",{type:"submit",className:"mt-5 flex w-full items-center justify-center gap-3 rounded-lg bg-gray-900 py-2 text-white transition hover:bg-black disabled:bg-gray-400",onClick:w,disabled:f,children:f?"Түр хүлээнэ үү...":e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_,alt:"Google Icon",className:"h-5 w-5"}),"Google хаягаар нэвтрэх"]})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("label",{children:"Бүртгэлгүй юу? "}),e.jsx("a",{href:"/signup",className:"text-blue-500 underline",children:"Бүртгүүлэх"})]})]})})},Ee=({onSignup:l})=>{const[t,s]=c.useState(""),[i,m]=c.useState(""),[o,x]=c.useState(""),[f,u]=c.useState(""),[n,h]=c.useState(!1),[y,w]=c.useState(!1),k=r=>{const{name:b,value:a}=r.target;b==="name"&&s(a),b==="email"&&m(a),b==="password"&&x(a),b==="passRepeat"&&u(a)},j=()=>{h(!0),C.post("users/register",{name:t,email:i,password:o}).then(r=>{l(r.data.token,r.data.user.role)}).catch(r=>{var b,a;O.error((a=(b=r.response)==null?void 0:b.data)==null?void 0:a.error)}).finally(()=>{h(!1)})},N=()=>{w(!0),window.location.href="http://localhost:5000/api/v1/users/google",w(!1)},d=t&&i&&o&&o===f,g=r=>{r.key==="Enter"&&d&&!n&&j()};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-200",children:e.jsxs("div",{className:"w-90 rounded-lg bg-gray-100 p-6 shadow-xl",children:[e.jsx("h1",{className:"text-center text-xl font-bold text-gray-800",children:"Бүртгүүлэх"}),e.jsx("div",{className:"mt-5",children:e.jsx("input",{name:"name",type:"text",placeholder:"Нэр",className:"w-full rounded-md border border-gray-300 p-2",onChange:k,onKeyDown:g})}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{name:"email",type:"email",placeholder:"Имэйл",className:"w-full rounded-md border border-gray-300 p-2",onChange:k,onKeyDown:g})}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{name:"password",type:"password",placeholder:"Нууц үг",className:"w-full rounded-md border border-gray-300 p-2",onChange:k,onKeyDown:g})}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{name:"passRepeat",type:"password",placeholder:"Нууц үг давтах",className:"w-full rounded-md border border-gray-300 p-2",onChange:k,onKeyDown:g})}),e.jsx("button",{type:"submit",className:"mt-5 w-full rounded-lg bg-blue-500 py-2 text-white transition hover:bg-blue-600 disabled:bg-gray-400",onClick:j,disabled:!d||n,children:n?"Түр хүлээнэ үү...":"Бүртгүүлэх"}),e.jsx("button",{type:"submit",className:"mt-5 flex w-full items-center justify-center gap-3 rounded-lg bg-gray-900 py-2 text-white transition hover:bg-black",onClick:N,disabled:y,children:y?"Түр хүлээнэ үү...":e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_,alt:"Google Icon",className:"h-5 w-5"}),"Google хаягаар бүртгүүлэх"]})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("label",{children:"Бүртгэлтэй юу? "}),e.jsx("a",{href:"/login",className:"text-blue-500 underline",children:"Нэвтрэх"})]})]})})},Pe=()=>{const{isAuth:l}=D(),t=R(),s=i=>{l?t(i):O.error("Та эхлээд нэвтэрнэ үү!")};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"relative flex min-h-[70vh] m-3 rounded-md items-center justify-center bg-[url('/src/assets/background.jpg')] bg-cover bg-center bg-no-repeat text-white opacity-90",children:e.jsxs("div",{className:"z-10 max-w-3xl px-6 text-center",children:[e.jsx("h1",{className:"font-code mb-4 text-4xl font-bold md:text-6xl",children:"Танд хэрэгтэй хууль зүйн тусламжийг эндээс"}),e.jsx("p",{className:"font-code mb-6 text-lg md:text-xl",children:"Бид танд ойр байрлах хуулийн хуулийн үйлчилгээ үзүүлэгчдийг санал болгож байна."}),!l&&e.jsx(A,{href:"/login",className:"mr-4",white:!0,children:"Бидэнтэй нэгдэх"})]})}),e.jsxs("div",{className:"font-code flex flex-col items-center justify-center bg-gray-100 p-10 text-center md:flex-row",children:[e.jsxs("section",{className:"mb-9 md:mb-0 md:space-x-6",children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold",children:"Хуулийн фирмүүд"}),e.jsx("p",{className:"mb-5 text-lg",children:"Хууль зүйн үйлчилгээ үзүүлэгч байгууллагуудын байршилтай танилцаарай."}),e.jsx(A,{onClick:()=>s("/firms"),black:!0,children:"Харах"})]}),e.jsxs("section",{className:"mb-9 md:mb-0 md:space-x-6",children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold",children:"Хуульчид"}),e.jsx("p",{className:"mb-5 text-lg",children:"Мэргэшсэн хуульчдтай холбогдохыг хүсвэл энд дарна уу."}),e.jsx(A,{onClick:()=>s("/lawyers"),black:!0,children:"Холбогдох"})]}),e.jsxs("section",{className:"mb-9 md:mb-0 md:space-x-6",children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold",children:"Мэдээ мэдээллүүд"}),e.jsx("p",{className:"mb-5 text-lg",children:"Хууль зүйн мэдээ мэдээллийг цаг алдалгүй аваарай."}),e.jsx(A,{onClick:()=>s("/infos"),black:!0,children:"Мэдээлэл харах"})]})]})]})};function I(){return e.jsx("div",{className:"loader"})}const Fe=()=>{const[l,t]=c.useState(null),[s,i]=c.useState([]),[m,o]=c.useState("list"),x=E(F),{data:f=[],isLoading:u}=se({queryKey:["firms",l],queryFn:async({queryKey:j})=>{const N=j[1];if(!N)return[];const{latitude:d,longitude:g}=N,b=(await C.get("firms",{params:{latMin:d-.1,latMax:d+.1,lonMin:g-.1,lonMax:g+.1}})).data.data;return await Promise.all(b.map(async p=>{if(p.photo&&p.photoUrl==="no-url")try{const v=`gs://legal-guide-2f523.firebasestorage.app/FirmPhotos/${p.photo}`,U=L(x,v),B=await P(U);return{...p,photoUrl:B}}catch(v){return console.error("Зургийг татахад алдаа гарлаа",v),p}return p}))},enabled:!!l,staleTime:1e3*60*5,cacheTime:1e3*60*30});c.useEffect(()=>{const j=navigator.geolocation.watchPosition(N=>{const{latitude:d,longitude:g}=N.coords;t({latitude:d,longitude:g}),console.log(d,g)},N=>{console.error("Байршлыг авахад алдаа гарлаа",N),t({latitude:47.918834,longitude:106.917601})},{enableHighAccuracy:!0,maximumAge:6e4,timeout:5e3});return()=>navigator.geolocation.clearWatch(j)},[]),c.useEffect(()=>{if(l&&f.length>0){const N=f.map(d=>{const g=n(l.latitude,l.longitude,d.location.latitude,d.location.longitude);return{...d,distance:g}}).sort((d,g)=>d.distance-g.distance);i(N)}},[l,f]);const n=(j,N,d,g)=>{if(j===void 0||N===void 0||d===void 0||g===void 0)return console.warn("Хоорондын зай тооцоолох координатууд буруу байна",j,N,d,g),null;const r=6371,b=(d-j)*(Math.PI/180),a=(g-N)*(Math.PI/180),p=Math.sin(b/2)*Math.sin(b/2)+Math.cos(j*(Math.PI/180))*Math.cos(d*(Math.PI/180))*Math.sin(a/2)*Math.sin(a/2),v=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));return r*v},h=X.icon({iconUrl:Ne,iconSize:[20,20],iconAnchor:[12,20],popupAnchor:[1,-34],shadowSize:[30,30]}),y=X.icon({iconUrl:ve,iconSize:[25,25],iconAnchor:[12,25],popupAnchor:[1,-34],shadowSize:[30,30]}),w=()=>u?e.jsx(I,{}):e.jsx("div",{className:"mb-3 flex flex-col items-center justify-center",children:l&&e.jsxs(ae,{center:[l.latitude,l.longitude],zoom:15,style:{height:"510px",width:"95%",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)",border:"1px solid #ccc"},scrollWheelZoom:!1,children:[e.jsx(le,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(G,{position:[l.latitude,l.longitude],icon:h,children:e.jsx(W,{children:"Таны байршил"})}),s.map(j=>e.jsx(G,{position:[j.location.latitude,j.location.longitude],icon:y,children:e.jsx(W,{children:e.jsxs("div",{children:[e.jsx("p",{children:j.name}),e.jsx("a",{href:`/firms/${j._id}`,children:"Дэлгэрэнгүй"})]})})},j._id))]})}),k=()=>u?e.jsx(I,{}):e.jsxs("ul",{className:"font-code grid min-h-screen grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5",children:[s.map(j=>e.jsx(z,{to:`/firms/${j._id}`,children:e.jsxs("li",{className:"flex h-64 flex-col overflow-hidden rounded-md bg-white shadow-md transition-transform hover:scale-105",children:[e.jsx("img",{src:j.photoUrl||"default-firm.jpg",alt:j.name,loading:"lazy",className:"h-40 w-full object-cover"}),e.jsxs("div",{className:"flex flex-col p-2",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800",children:[j.name," - ",e.jsxs("span",{className:"font-medium text-blue-600",children:[j.distance.toFixed(2)," км"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:j.address})]})]})},j._id)),s.length===0&&e.jsx("li",{className:"font-code col-span-full text-center text-gray-500",children:"Хуулийн фирмүүд олдсонгүй"})]});return e.jsxs("div",{className:"bg-gray-100 px-4 py-2",children:[e.jsx("h3",{className:"font-code mb-4 ml-2 flex justify-center text-2xl font-bold",children:"Тантай ойрхон хуулийн фирмүүд"}),l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 ml-2 flex justify-center gap-5",children:[e.jsx(A,{onClick:()=>o("list"),black:!0,children:"Жагсаалтаар харах"}),e.jsx(A,{onClick:()=>o("map"),black:!0,children:"Газрын зураг дээр харах"})]}),m==="list"?k():w()]}):e.jsx(I,{})]})},Ie=()=>{var x;const{id:l}=q(),[t,s]=c.useState(null),i=E(F),[m,o]=c.useState(null);return c.useEffect(()=>{(async()=>{const n=(await C.get(`firms/${l}`)).data.data;if(n.photo&&n.photoUrl==="no-url")try{const h=`gs://legal-guide-2f523.firebasestorage.app/FirmPhotos/${n.photo}`,y=L(i,h),w=await P(y);o(w)}catch(h){console.error("Зургийг татахад алдаа гарлаа",h),o(null)}n.photoUrl!=="no-url"&&o(n.photoUrl),s(n)})()},[l]),(t==null?void 0:t.length)===0?e.jsx("div",{className:"font-code col-span-full text-center text-gray-500",children:"Фирм олдсонгүй"}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 px-4 py-10",children:t?e.jsxs("div",{className:"font-code w-full max-w-3xl overflow-hidden rounded-xl bg-white shadow-2xl",children:[m&&e.jsx("img",{src:m,alt:t.name,className:"h-64 w-full object-cover",loading:"lazy"}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"📍 Хаяг:"})," ",t.address]}),t.description&&e.jsx("p",{className:"text-gray-700",children:t.description}),((x=t.services)==null?void 0:x.length)>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"🛠 Үйлчилгээ"}),e.jsx("ul",{className:"mt-2 list-inside list-disc space-y-1 text-gray-700",children:t.services.map((f,u)=>e.jsx("li",{children:f},u))})]}),t.contact&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"📞 Холбоо барих"}),e.jsxs("p",{className:"mt-1 text-gray-700",children:["Утас: ",t.contact.phone]}),e.jsxs("p",{className:"text-gray-700",children:["И-мэйл: ",t.contact.email]})]})]})]}):e.jsx(I,{})})},De=()=>{const[l,t]=c.useState([]),[s,i]=c.useState(!1),m=E(F);return c.useEffect(()=>{(async()=>{try{i(!0);const f=(await C.get("lawyers")).data.data,u=await Promise.all(f.map(async n=>{if(n.photo&&n.photoUrl==="no-url"){const h=`gs://legal-guide-2f523.firebasestorage.app/LawyerPhotos/${n.photo}`,y=L(m,h),w=await P(y);return{...n,photoUrl:w}}return n}));t(u)}catch(x){console.error("Хуульчдын мэдээллийг татахад алдаа гарлаа",x)}finally{i(!1)}})()},[]),s?e.jsx(I,{}):e.jsxs("div",{className:"min-h-screen bg-gray-100 px-4 py-2",children:[e.jsx("h3",{className:"font-code mb-4 ml-2 flex justify-center text-2xl font-bold",children:"Хуульчдын мэдээлэл"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[l.map(o=>e.jsx(z,{to:`/lawyers/${o._id}`,children:e.jsxs("div",{className:"transform overflow-hidden rounded-md bg-white shadow-lg transition duration-300 hover:scale-105 hover:shadow-xl",children:[e.jsx("img",{src:o.photoUrl||"default-lawyer.jpg",alt:o.firsName,loading:"lazy",className:"h-40 w-full object-cover"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800",children:[o.firstName," ",o.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.position})]})]},o._id)},o._id)),l.length===0&&e.jsx("div",{className:"font-code col-span-full text-center text-gray-500",children:"Хуульчид олдсонгүй"})]})]})},Re=()=>{var m,o,x,f;const{id:l}=q(),[t,s]=c.useState(null),i=E(F);return c.useEffect(()=>{(async()=>{const n=await C.get(`lawyers/${l}`);if(n.data.data.photoUrl==="no-url"){const h=`gs://legal-guide-2f523.firebasestorage.app/LawyerPhotos/${n.data.data.photo}`,y=L(i,h),w=await P(y);s({...n.data.data,photoUrl:w})}else s(n.data.data)})()},[l]),e.jsx("div",{className:"font-code m-3 mx-auto max-w-2xl rounded-md bg-white p-6 shadow-xl",children:t?e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("img",{src:t.photoUrl,alt:t.firstName,className:"h-48 w-48 rounded-3xl border-2 border-blue-500 object-cover"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"font-medium text-blue-600",children:t.position}),e.jsxs("div",{className:"mt-4 w-full space-y-2 text-left",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"📞:"})," ",(m=t.contact)==null?void 0:m.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"📧:"})," ",(o=t.contact)==null?void 0:o.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"📍 Ажлын хаяг:"})," ",t.workAddress]}),e.jsx("p",{className:"font-semibold",children:" Үйлчилгээний чиглэл:"}),e.jsx("ul",{className:"list-inside list-disc text-gray-700",children:t.services.map((u,n)=>e.jsx("li",{children:u},n))})]}),e.jsxs("div",{className:"mt-4 flex gap-4",children:[((x=t.contact)==null?void 0:x.facebookAcc)&&e.jsx("a",{href:`https://facebook.com/${t.contact.facebookAcc}`,target:"_blank",className:"text-blue-600 hover:underline",children:e.jsx(Y,{size:25})}),((f=t.contact)==null?void 0:f.instagramAcc)&&e.jsx("a",{href:`https://instagram.com/${t.contact.instagramAcc}`,target:"_blank",className:"text-pink-500 hover:underline",children:e.jsx(Z,{size:25})})]})]}):e.jsx(I,{})})},Be=()=>{const[l,t]=c.useState([]),[s,i]=c.useState(!1),m=E(F);return c.useEffect(()=>{(async()=>{try{i(!0);const f=(await C.get("infos")).data.data,u=await Promise.all(f.map(async n=>{if(n.photoUrl!=="no-url")return n;if(n.photo||n.photoUrl==="no-url")try{const h=`gs://legal-guide-2f523.firebasestorage.app/InfoPhotos/${n.photo}`,y=L(m,h),w=await P(y);return{...n,photoUrl:w}}catch(h){return console.error("Зургийг татахад алдаа гарлаа",h),n}return n}));t(u)}catch(x){console.error("Мэдээллийг татахад алдаа гарлаа",x)}finally{i(!1)}})()},[]),s?e.jsx(I,{}):!l.length===0?e.jsx("div",{className:"font-code col-span-full text-center text-gray-500",children:"Мэдээлэл олдсонгүй"}):e.jsxs("div",{className:"font-code min-h-screen bg-gray-100 px-4 py-2",children:[e.jsx("h3",{className:"mb-4 ml-2 flex justify-center text-2xl font-bold",children:"Мэдээллүүд"}),e.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:l.map(o=>e.jsx(z,{to:`/infos/${o._id}`,children:e.jsxs("div",{className:"h-60 overflow-hidden rounded-md bg-white shadow-md transition-transform hover:scale-105",children:[e.jsx("img",{src:o.photoUrl||"default-info.jpg",alt:o.title,loading:"lazy",className:"h-40 w-full object-cover"}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:o.title}),e.jsx("p",{className:"text-sm text-gray-600",children:o.summary})]})]},o._id)},o._id))})]})},Me=()=>{const{id:l}=q(),[t,s]=c.useState(null),[i,m]=c.useState(!0),o=E(F);c.useEffect(()=>{l&&(async()=>{try{const n=(await C.get(`infos/${l}`)).data.data;if(n.photoUrl==="no-url"){const h=`InfoPhotos/${n.photo}`,y=L(o,h),w=await P(y);s({...n,photoUrl:w})}else s(n)}catch(u){console.error("Мэдээллийг татахад алдаа гарлаа",u)}finally{m(!1)}})()},[l]);const x=f=>{const u=new Date(f),n=u.getFullYear(),h=u.getMonth()+1,y=u.getDate();return`${h} сарын ${y}, ${n}`};return i?e.jsx(I,{}):!t.length===0?e.jsx("div",{className:"font-code col-span-full text-center text-gray-500",children:"Mэдээлэл олдсонгүй"}):e.jsxs("div",{className:"font-code min-h-screen bg-gray-100 px-50 py-7",children:[e.jsx("h3",{className:"mb-4 ml-2 flex justify-center text-2xl font-bold",children:t.title}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.photoUrl||"default-info.jpg",alt:t.title,loading:"lazy",className:"h-55 w-full rounded-md object-cover shadow-sm"}),e.jsxs("div",{className:"absolute top-2 right-2 rounded bg-white/80 px-3 py-1 text-sm text-gray-700 shadow",children:["🕒 Нийтэлсэн: ",x(t.createdAt)]})]}),e.jsx("p",{className:"mt-4 whitespace-pre-line text-gray-800",children:t.content})]})},Qe=()=>{const[l]=oe(),t=R(),{login:s}=D();return c.useEffect(()=>{const i=l.get("token"),m=l.get("role");i&&m?(s(i,m),t("/")):t("/login")},[l]),null},Oe=()=>e.jsx("svg",{className:"block",width:0,height:0,children:e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"btn-left",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#89F9E8"}),e.jsx("stop",{offset:"100%",stopColor:"#FACB7B"})]}),e.jsxs("linearGradient",{id:"btn-top",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#D87CEE"}),e.jsx("stop",{offset:"100%",stopColor:"#FACB7B"})]}),e.jsxs("linearGradient",{id:"btn-bottom",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9099FC"}),e.jsx("stop",{offset:"100%",stopColor:"#89F9E8"})]}),e.jsxs("linearGradient",{id:"btn-right",x1:"14.635%",x2:"14.635%",y1:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9099FC"}),e.jsx("stop",{offset:"100%",stopColor:"#D87CEE"})]})]})}),J=({admin:l})=>{const{isAuth:t,isAdmin:s}=D();return t?l&&!s?e.jsx(T,{to:"/",replace:!0}):e.jsx(ne,{}):e.jsx(T,{to:"/login",replace:!0})},ze=new ue,qe=()=>{const l=R(),{login:t}=D(),s=(i,m)=>{t(i,m),l("/")};return e.jsxs(re,{client:ze,children:[e.jsx(ce,{position:"top-right",autoClose:1500,limit:3,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnHover:!1,theme:"dark"}),e.jsxs("div",{className:"overflow-hidden pt-[6.5rem] lg:pt-[5.25rem]",children:[e.jsx(Se,{}),e.jsxs(ie,{children:[e.jsx(S,{path:"/",element:e.jsx(Pe,{})}),e.jsx(S,{element:e.jsx(J,{admin:!0}),children:e.jsx(S,{path:"admin",element:e.jsx(be,{})})}),e.jsx(S,{path:"login",element:e.jsx(Le,{onLogin:s})}),e.jsx(S,{path:"signup",element:e.jsx(Ee,{onSignup:s})}),e.jsx(S,{path:"success",element:e.jsx(Qe,{})}),e.jsxs(S,{element:e.jsx(J,{}),children:[e.jsx(S,{path:"firms",element:e.jsx(Fe,{})}),e.jsx(S,{path:"firms/:id",element:e.jsx(Ie,{})}),e.jsx(S,{path:"lawyers",element:e.jsx(De,{})}),e.jsx(S,{path:"lawyers/:id",element:e.jsx(Re,{})}),e.jsx(S,{path:"infos",element:e.jsx(Be,{})}),e.jsx(S,{path:"infos/:id",element:e.jsx(Me,{})})]})]}),e.jsx(Ue,{})]}),e.jsx(Oe,{})]})};de.createRoot(document.getElementById("root")).render(e.jsx(Ae,{children:e.jsx(c.StrictMode,{children:e.jsx(me,{children:e.jsx(qe,{})})})}));
